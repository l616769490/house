<html>
<head>
    <title>主页</title>
    <meta charset="UTF-8"> <!-- for HTML5 -->

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script src="js/jquery-1.12.4.min.js">

    </script>

    <link href="${APP_PATH}/css/my.amin.css" rel="stylesheet"/>
    <link href="bootstrap-3.3.7-dist/css/bootstrap.min.css"
          rel="stylesheet"/>
    <script src="bootstrap-3.3.7-dist/js/bootstrap.min.js">

    </script>

    <!-- 引入 ECharts 文件 -->
    <script src="js/echarts.js">
    </script>
</head>
<body>

<div class="container-fluid">
    <!-- 显示表格数据 -->
    <div class="row">
        <div class="col-md-12">
            <table class="table table-hover" id="house_table">
                <thead>
                <tr>
                    <th>aaa</th>
                    <th>bbb</th>
                    <th>ccc</th>
                    <th>ddd</th>
                    <th>eee</th>
                    <th>fff</th>
                </tr>
                </thead>
                <tbody>

                </tbody>
            </table>
        </div>
    </div>

    <!-- 显示分页信息 -->
    <div class="row">
        <!--分页文字信息  -->
        <div class="col-md-6" id="page_info_area"></div>
        <!-- 分页条信息 -->
        <div class="col-md-6" id="page_nav_area">

        </div>
    </div>

    <div class="row">
        <div id="btns" class="col-lg-8 col-md-offset-2">
            <button id="btn-1" class="btn btn-success" onclick="getTable1()">基础-房间数分析</button>
            <button id="btn-2" class="btn btn-success col-md-offset-1" onclick="getTable2()">按区域-家庭收入分析</button>
            <button id="btn-3" class="btn btn-success col-md-offset-1" onclick="getTable3()">按区域-房产税分析</button>
        </div>
    </div>
</div>
<script>
    function getTable1() {
        $.ajax({
            url: "/basics_rooms_num_table",
            type: "POST",
            dataType: "json",
            contentType: 'application/json',
            data: JSON.stringify({
                'year': 2013,
                'page': 2,
                'searches': [{'title': '房间数', 'values': ['1']}, {'title': '卧室数', 'values': ['1']}]
            }),
            success: function (result) {
                showTable(result);
            }
        });
    }

    function getTable2() {
        $.ajax({
            url: "/region_zinc2_num_table",
            type: "POST",
            dataType: "json",
            contentType: 'application/json',
            data: JSON.stringify({
                'year': 2013,
                'page': 2,
                'searches': [{'title': '房间数', 'values': ['1']}, {'title': '卧室数', 'values': ['1']}]
            }),
            success: function (result) {
                showTable(result);
            }
        });
    }

    function getTable3() {
        $.ajax({
            url: "/region_zsmhc_num_table",
            type: "POST",
            dataType: "json",
            contentType: 'application/json',
            data: JSON.stringify({
                'year': 2013,
                'page': 2,
                'searches': [{'title': '房间数', 'values': ['1']}, {'title': '卧室数', 'values': ['1']}]
            }),
            success: function (result) {
                showTable(result);
            }
        });
    }

    function showTable(result) {
        // 显示表格数据
        build_house_table(result);
    }

    function build_house_table(result){
        // 添加表头
        $("#house_table thead tr").empty();
        var tops = result.top.list;
        $.each(tops, function (index, top) {
            $("<th></th>").append(top).appendTo("#house_table thead tr");
        });

        // 添加表格数据
        $("#house_table tbody").empty();
        var datas = result.data.list;
        $.each(datas, function (index, data) {
            var dataTr = $("<tr></tr>");
            dataTr.appendTo("#house_table tbody");
            $.each(data, function (i, item) {
                $("<th></th>").append(item).appendTo(dataTr);
            });
            dataTr.appendTo("#house_table tbody");
        });
    }
</script>

</body>
</html>
